{"componentChunkName":"component---src-templates-post-detail-js","path":"/post/how-to-create-a-declarative-schema-in-magento-2/","result":{"data":{"wpPost":{"title":"How to Create a Declarative Schema in Magento 2","content":"\n<p>Magento 2 uses a <a href=\"https://developer.adobe.com/commerce/php/development/components/declarative-schema/\">declarative schema</a> to define the structure of the database tables and the relationships between them. This approach allows developers to describe the desired state of the database, and Magento will automatically make the necessary changes to bring the database into compliance with the schema. By using a declarative schema, developers can simplify database management and reduce the risk of errors when making changes to the database structure. In this tutorial, we will guide you through the process of creating a declarative schema in Magento 2, including defining tables, columns, and relationships.</p>\n\n\n\n<p>Magento 2 is an open-source e-commerce platform that uses the <a href=\"/what-is-magento-framework-in-php/\">Magento Framework in PHP</a> and provides developers with the ability to create custom modules with their own database schemas. Also php framework helps developers to not create repetitive codes. One way to define these schemas is by using the declarative schema, which is a new feature in Magento 2.3 and later. This article will provide a step-by-step guide on <strong><em>how to create a declarative schema in Magento 2.</em></strong></p>\n\n\n\n<h2 class=\"wp-block-heading\">Steps to Create a Declarative Schema in Magento 2</h2>\n\n\n\n<h3 class=\"wp-block-heading\">Step 1: Create the module structure</h3>\n\n\n\n<p>To start for How to Create a Declarative Schema in Magento 2, you need to create a basic module structure in your Magento 2 instance. You can use the following commands to create a new module:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>vbnet\nphp bin/magento setup:module:create --name=Vendor_Module --namespace=Vendor --module-name=Module</code></pre>\n\n\n\n<h3 class=\"wp-block-heading\">Step 2: Create the database table</h3>\n\n\n\n<p>Next, create a database table by creating the db_schema.xml file in the etc directory of your module. This file defines the database table structure, including the columns and indexes. The following is an example of a simple db_schema.xml file:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>xml\n\n&lt;?xml version=\"1.0\"?&gt;\n\n&lt;schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\"&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;table name=\"module_example\"&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;column xsi:type=\"int\" name=\"id\" padding=\"11\" unsigned=\"true\" nullable=\"false\" identity=\"true\" comment=\"ID\"/&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;column xsi:type=\"varchar\" name=\"name\" nullable=\"false\" length=\"255\" comment=\"Name\"/&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;column xsi:type=\"timestamp\" name=\"created_at\" nullable=\"false\" default=\"CURRENT_TIMESTAMP\" comment=\"Created At\"/&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;constraint xsi:type=\"primary\" referenceId=\"PRIMARY\"&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;column name=\"id\"/&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/constraint&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;\n\n&lt;/schema&gt;</code></pre>\n\n\n\n<h3 class=\"wp-block-heading\">Step 3: Run the Upgrade Schema script</h3>\n\n\n\n<p>To apply the changes to the database, you need to run the UpgradeSchema script. To do this, create the UpgradeSchema.php file in the Setup directory of your module. The following is an example of a simple UpgradeSchema script:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>php\n&lt;?php\n\nnamespace Vendor\\Module\\Setup;\n\nuse Magento\\Framework\\Setup\\UpgradeSchemaInterface;\n\nuse Magento\\Framework\\Setup\\ModuleContextInterface;\n\nuse Magento\\Framework\\Setup\\SchemaSetupInterface;\n\nclass UpgradeSchema implements UpgradeSchemaInterface\n\n{\n\n&nbsp;&nbsp;&nbsp;&nbsp;public function upgrade(SchemaSetupInterface $setup, ModuleContextInterface $context)\n\n&nbsp;&nbsp;&nbsp;&nbsp;{\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$setup-&gt;startSetup();\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (version_compare($context-&gt;getVersion(), '1.0.1', '&lt;')) {\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$setup-&gt;getConnection()-&gt;addColumn(\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$setup-&gt;getTable('module_example'),\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'description',\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#91;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'type' =&gt; \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_TEXT,\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'nullable' =&gt; true,\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'comment' =&gt; 'Description',\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$setup-&gt;endSetup();\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n}</code></pre>\n\n\n\n<h3 class=\"wp-block-heading\">4: Update the module version</h3>\n\n\n\n<p>To trigger the UpgradeSchema script, you need to update the module version in the module.xml file located in the etc directory of your module. The following is an example of an updated module.xml file:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>xml\n\n&lt;?xml version=\"1.0\"?&gt;\n\n&lt;config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Module/etc/module.xsd\"&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;module name=\"Vendor_Module\" setup_version=\"1.0.1\"&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;sequence&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;module name=\"Magento_DeclarativeSchema\"/&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/sequence&gt;\n\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/module&gt;\n\n&lt;/config&gt;</code></pre>\n\n\n\n<h3 class=\"wp-block-heading\">Step 5: Deploy the module</h3>\n\n\n\n<p>Finally, to deploy the module, you need to run the following command:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>python\n\nphp bin/magento setup:upgrade</code></pre>\n\n\n\n<p>This will apply the changes to the database, and you should now have a new table in your Magento 2 instance with the structure defined in your db_schema.xml file.</p>\n\n\n\n<h3 class=\"wp-block-heading\">conclusion</h3>\n\n\n\n<p>In conclusion, the declarative schema in Magento 2 is a convenient way to define database tables, and the Upgrade Schema script makes it easy to apply changes to your database. By following the steps outlined in this article, you should now be able to create a declarative schema in Magento 2. Hope so the blog on how to create a declarative schema in Magento 2 was helpful to you.</p>\n<div class='sfsi_Sicons sfsi_Sicons_position_left' style='float: none; vertical-align: middle; text-align:left'><div style='margin:0px 8px 0px 0px; line-height: 24px'><span>Please follow and like us:</span></div><div class='sfsi_socialwpr'><div class='sf_fb_share sf_icon' style='text-align:left;vertical-align: middle;'><a  target='_blank' rel='noopener' href='https://www.facebook.com/sharer/sharer.php?u=/how-to-create-a-declarative-schema-in-magento-2/' style='display:inline-block;'><img class='sfsi_wicon'  data-pin-nopin='true' alt='fb-share-icon' title='Facebook Share' src='https://webguru.dev/wp-content/plugins/ultimate-social-media-icons/images/share_icons/fb_icons/en_US.svg' /></a></div><div class='sf_twiter sf_icon' style='display: inline-block;vertical-align: middle;width: auto;margin-left: 7px;'>\r\n\t\t\t\t\t\t<a target='_blank' rel='noopener' href='https://twitter.com/intent/tweet?text=How+to+Create+a+Declarative+Schema+in+Magento+2+https%3A%2F%2Fwebguru.dev%2Fhow-to-create-a-declarative-schema-in-magento-2%2F'style='display:inline-block' >\r\n\t\t\t\t\t\t\t<img data-pin-nopin= true class='sfsi_wicon' src='https://webguru.dev/wp-content/plugins/ultimate-social-media-icons/images/share_icons/Twitter_Tweet/en_US_Tweet.svg' alt='Tweet' title='Tweet' >\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div></div></div><div class=\"saboxplugin-wrap\" itemtype=\"http://schema.org/Person\" itemscope itemprop=\"author\"><div class=\"saboxplugin-tab\"><div class=\"saboxplugin-gravatar\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained  inline-gatsby-image-wrapper\"><div style=\"max-width:100px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;100&#x27;%20width=&#x27;100&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 100px) 100px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/05624c0b3d4a4f7d0da605f624d7bb07/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D25%26h%3D25%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22\" data-srcset=\"/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/05624c0b3d4a4f7d0da605f624d7bb07/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D25%26h%3D25%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22 25w,/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/7d342f8b9135b7648f10ed5d19c5b6df/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D50%26h%3D50%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22 50w,/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/f7535d1722cb1d17e5bf31154bf170d3/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D100%26h%3D100%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22 100w\" alt=\"Aaron Jenkins\"/><noscript><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 100px) 100px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/05624c0b3d4a4f7d0da605f624d7bb07/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D25%26h%3D25%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22\" srcSet=\"/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/05624c0b3d4a4f7d0da605f624d7bb07/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D25%26h%3D25%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22 25w,/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/7d342f8b9135b7648f10ed5d19c5b6df/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D50%26h%3D50%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22 50w,/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/f7535d1722cb1d17e5bf31154bf170d3/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&amp;a=w%3D100%26h%3D100%26fm%3Dpng%26q%3D90&amp;cd=2024-11-12T13%3A05%3A22 100w\" alt=\"Aaron Jenkins\"/></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector(\"[data-placeholder-image]\").style.opacity=0)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"1\">{\"image\":{\"images\":{\"sources\":[],\"fallback\":{\"src\":\"/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/05624c0b3d4a4f7d0da605f624d7bb07/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&a=w%3D25%26h%3D25%26fm%3Dpng%26q%3D90&cd=2024-11-12T13%3A05%3A22\",\"srcSet\":\"/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/05624c0b3d4a4f7d0da605f624d7bb07/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&a=w%3D25%26h%3D25%26fm%3Dpng%26q%3D90&cd=2024-11-12T13%3A05%3A22 25w,/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/7d342f8b9135b7648f10ed5d19c5b6df/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&a=w%3D50%26h%3D50%26fm%3Dpng%26q%3D90&cd=2024-11-12T13%3A05%3A22 50w,/_gatsby/image/2c35eda577657dc17647bf1d65e5bd4e/f7535d1722cb1d17e5bf31154bf170d3/Aaron-Jenkins.png?u=https%3A%2F%2Fwebguru.dev%2Fwp-content%2Fuploads%2F2024%2F11%2FAaron-Jenkins.png&a=w%3D100%26h%3D100%26fm%3Dpng%26q%3D90&cd=2024-11-12T13%3A05%3A22 100w\",\"sizes\":\"(min-width: 100px) 100px, 100vw\"}},\"layout\":\"constrained\",\"width\":100,\"height\":100},\"alt\":\"Aaron Jenkins\",\"className\":\" inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"1\"}</script></div><div class=\"saboxplugin-authorname\"><a href=\"/author/aaron-jenkins/\" class=\"vcard author\" rel=\"author\"><span class=\"fn\">Aaron Jenkins</span></a></div><div class=\"saboxplugin-desc\"><div itemprop=\"description\"><p>I am Aaron Jenkins, a Magento Developer with over 12+ years of experience. I specialize in Magento 2 and I am passionate about sharing my knowledge and experience through my blog. Here, I will be sharing tutorials, tips, and best practices for all things Magento 2. Follow my blog and let&#8217;s learn and grow together.</p>\n</div></div><div class=\"clearfix\"></div></div></div>","date":"January 31, 2023"}},"pageContext":{"id":"cG9zdDo0OTU="}},"staticQueryHashes":[],"slicesMap":{}}